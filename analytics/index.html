<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Analytics.PI – AI-Powered Data Intelligence on Pi Network. Real-time analytics, predictive insights, and Pi payments." />
  <meta name="keywords" content="Analytics.PI, AI, Pi Network, Data Intelligence, Web3 Analytics, Pi Payments" />
  <meta name="author" content="LifeNexus.PI" />
  <meta name="theme-color" content="#3b0a66" />
  <meta name="pi-app-id" content="analytics.pi" />
  <meta name="pi-chain-id" content="testnet" />
  <title>Analytics.PI – AI Data Intelligence on Pi Network</title>

  <!-- Pi SDK -->
  <script src="https://sdk.minepi.com/v2/pi-sdk.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --pi-purple: #6d28d9;
      --pi-cyan: #00ffe7;
      --primary-gradient: linear-gradient(135deg, #b67eff, #61d7ff);
      --dark-bg: radial-gradient(circle at top, #1a0033, #0a001a);
      --light-bg: radial-gradient(circle at top, #f0eaff, #d6e6ff);
      --glow-purple: 0 0 20px rgba(164, 92, 255, 0.5);
      --glow-cyan: 0 0 25px rgba(0, 255, 231, 0.6);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    html, body {
      height: 100%;
      overflow: hidden;
      touch-action: pan-y;
    }

    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #e0e0e0;
      background: var(--dark-bg);
      transition: all 0.6s ease;
      position: relative;
    }

    body.light {
      background: var(--light-bg);
      color: #222;
    }

    canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .container {
      z-index: 1;
      max-width: 90%;
      padding: 20px;
    }

    .logo {
      font-size: clamp(2.5rem, 6vw, 3.5rem);
      font-weight: 700;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 25px rgba(182, 126, 255, 0.7);
      margin-bottom: 8px;
    }

    .tagline {
      font-size: clamp(1rem, 2.8vw, 1.2rem);
      opacity: 0.9;
      margin-bottom: 35px;
      line-height: 1.6;
    }

    .btn-group {
      display: flex;
      flex-direction: column;
      gap: 16px;
      align-items: center;
    }

    .btn {
      width: 260px;
      max-width: 90%;
      padding: 16px 0;
      border: 2px solid transparent;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1.05rem;
      letter-spacing: 0.7px;
      text-decoration: none;
      color: #fff;
      background: transparent;
      cursor: pointer;
      transition: all 0.35s ease;
      position: relative;
      overflow: hidden;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
      transition: 0.7s;
      z-index: -1;
    }

    .btn:hover::before { left: 100%; }

    .btn.start {
      border-color: #a45cff;
      box-shadow: var(--glow-purple);
    }

    .btn.start:hover {
      background: rgba(164, 92, 255, 0.3);
      transform: translateY(-4px);
      box-shadow: 0 0 30px rgba(164, 92, 255, 0.7);
    }

    .btn.pi-pay {
      border-color: var(--pi-cyan);
      box-shadow: var(--glow-cyan);
    }

    .btn.pi-pay:hover {
      background: rgba(0, 255, 231, 0.25);
      transform: translateY(-4px);
      box-shadow: 0 0 35px rgba(0, 255, 231, 0.8);
    }

    .btn.nexus {
      border-color: #999;
      box-shadow: 0 0 15px rgba(160, 160, 160, 0.4);
    }

    .btn.nexus:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }

    body.light .btn { color: #222; }

    #toggleMode {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.3);
      color: #fff;
      padding: 10px 22px;
      border-radius: 30px;
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #toggleMode:hover {
      background: rgba(255,255,255,0.25);
      transform: scale(1.05);
    }

    body.light #toggleMode {
      background: rgba(0,0,0,0.1);
      color: #222;
      border-color: rgba(0,0,0,0.3);
    }

    .pi-badge {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(8px);
      color: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      border: 1px solid rgba(255,255,255,0.2);
      z-index: 1;
    }

    body.light .pi-badge {
      background: rgba(0,0,0,0.08);
      color: #222;
      border-color: rgba(0,0,0,0.2);
    }

    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.9);
      color: #fff;
      padding: 14px 30px;
      border-radius: 50px;
      font-weight: 500;
      box-shadow: 0 8px 30px rgba(0,0,0,0.4);
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease;
      z-index: 1000;
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.15);
    }

    .toast.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-12px);
    }

    @media (max-width: 480px) {
      .btn { width: 100%; font-size: 0.98rem; }
      #toggleMode { top: 15px; right: 15px; padding: 8px 16px; font-size: 0.8rem; }
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>

  <button id="toggleMode">Night</button>

  <div class="container">
    <h1 class="logo">Analytics.PI</h1>
    <p class="tagline">AI-Powered Data Intelligence on Pi Network<br>Real-time Insights • Predictive Analytics • Pi Payments</p>

    <div class="btn-group">
      <button class="btn start" id="startBtn">
        Launch Dashboard
      </button>
      <button class="btn pi-pay" id="piPayBtn">
        Pay with Pi
      </button>
      <a href="https://lifenexus.pi" class="btn nexus" target="_blank" rel="noopener">
        LifeNexus.PI Hub
      </a>
    </div>
  </div>

  <div class="pi-badge">Powered by Pi Network • Testnet Active</div>
  <div class="toast" id="toast"></div>

  <script>
    // === Pi SDK Initialization ===
    let piUser = null;
    Pi.init({ version: "2.0" });

    // === Particles System ===
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let particles = [];
    const mouse = { x: null, y: null, radius: 130 };
    let isLightMode = false;

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      initParticles();
    }

    window.addEventListener('resize', debounce(resize, 200));
    window.addEventListener('mousemove', e => { mouse.x = e.x; mouse.y = e.y; });
    window.addEventListener('touchmove', e => {
      const t = e.touches[0];
      mouse.x = t.clientX; mouse.y = t.clientY;
    }, { passive: true });

    class Particle {
      constructor() { this.reset(); }
      reset() {
        this.size = Math.random() * 2.5 + 1;
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.baseX = (Math.random() - 0.5) * 1.3;
        this.baseY = (Math.random() - 0.5) * 1.3;
        this.speedX = this.baseX;
        this.speedY = this.baseY;
      }
      update() {
        const dx = mouse.x - this.x;
        const dy = mouse.y - this.y;
        const dist = Math.hypot(dx, dy);
        if (dist < mouse.radius) {
          const force = mouse.radius / (dist * dist);
          this.speedX = this.baseX + dx * force * 0.09;
          this.speedY = this.baseY + dy * force * 0.09;
        } else {
          this.speedX += (this.baseX - this.speedX) * 0.05;
          this.speedY += (this.baseY - this.speedY) * 0.05;
        }
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) this.reset();
      }
      draw() {
        ctx.fillStyle = isLightMode ? 'rgba(120,100,255,0.75)' : 'rgba(182,126,255,0.75)';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function initParticles() {
      particles = [];
      const count = window.innerWidth < 768 ? 50 : 80;
      for (let i = 0; i < count; i++) particles.push(new Particle());
    }

    function connect() {
      ctx.strokeStyle = isLightMode ? 'rgba(0,0,0,0.1)' : 'rgba(97,215,255,0.15)';
      ctx.lineWidth = 1;
      for (let a = 0; a < particles.length; a++) {
        for (let b = a + 1; b < particles.length; b++) {
          const dx = particles[a].x - particles[b].x;
          const dy = particles[a].y - particles[b].y;
          const dist = dx * dx + dy * dy;
          if (dist < 12000) {
            ctx.globalAlpha = 1 - Math.sqrt(dist) / 110;
            ctx.beginPath();
            ctx.moveTo(particles[a].x, particles[a].y);
            ctx.lineTo(particles[b].x, particles[b].y);
            ctx.stroke();
          }
        }
      }
      ctx.globalAlpha = 1;
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => { p.update(); p.draw(); });
      connect();
      requestAnimationFrame(animate);
    }

    function debounce(func, wait) {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => func(...args), wait);
      };
    }

    // === UI & Pi Payments ===
    const toast = document.getElementById('toast');
    function showToast(msg, dur = 3000) {
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), dur);
    }

    document.getElementById('startBtn').addEventListener('click', () => {
      showToast('Launching AI Analytics Dashboard...');
      setTimeout(() => window.location.href = '/dashboard', 1500);
    });

    document.getElementById('piPayBtn').addEventListener('click', async () => {
      try {
        const user = await Pi.authenticate(['username', 'payments'], onIncompletePayment);
        piUser = user;
        await Pi.createPayment({
          amount: 1,
          memo: "Analytics.PI Pro Access",
          metadata: { product: "pro_plan", domain: "analytics.pi" }
        }, {
          onReadyForServerApproval: approvePayment,
          onReadyForServerCompletion: completePayment,
          onCancel: () => showToast('Payment Cancelled'),
          onError: (err) => showToast('Payment Error: ' + err.message)
        });
      } catch (err) {
        showToast('Pi Login Required');
      }
    });

    function approvePayment(paymentId) {
      // Simulate server approval
      Pi.approvePayment(paymentId, { status: "success" });
      showToast('Payment Approved! Access Granted.');
    }

    function completePayment(paymentId, txid) {
      showToast('Payment Completed! TXID: ' + txid.slice(0, 8) + '...');
      setTimeout(() => window.location.href = '/pro-dashboard', 2000);
    }

    function onIncompletePayment(payment) {
      showToast('Incomplete Payment Detected');
    }

    // === Light/Dark Mode ===
    document.getElementById('toggleMode').addEventListener('click', () => {
      document.body.classList.toggle('light');
      isLightMode = document.body.classList.contains('light');
      document.getElementById('toggleMode').innerHTML = isLightMode ? 'Day' : 'Night';
      initParticles();
    });

    // === Init ===
    resize();
    animate();
  </script>
</body>
</html>
